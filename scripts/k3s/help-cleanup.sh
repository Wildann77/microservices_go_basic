#!/bin/bash
#
# Quick reference for k3s deployment management
#

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘           k3s Deployment Management Guide                        â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "ğŸ”§ REDEPLOY OPTIONS:"
echo ""
echo "1ï¸âƒ£  SOFT REDEPLOY (make k3s-restart)"
echo "   Command: make k3s-restart"
echo "   What it does:"
echo "     âœ“ Restarts all pods (rolling restart)"
echo "     âœ“ Keeps all data in databases"
echo "     âœ“ Keeps all configurations"
echo "     âœ“ Zero downtime for most services"
echo "   Use when: Applying config changes, code updates"
echo "   Time: ~10-20 seconds"
echo ""
echo "2ï¸âƒ£  HARD REDEPLOY (make k3s-redeploy â†’ option 2)"
echo "   Command: make k3s-redeploy"
echo "   What it does:"
echo "     âœ“ Deletes all app deployments"
echo "     âœ“ Keeps infrastructure (DB, Redis, RabbitMQ)"
echo "     âœ“ Keeps Docker images (no rebuild needed)"
echo "     âœ“ Re-deploys from existing images"
echo "   Use when: Full application reset needed"
echo "   Time: ~30-60 seconds"
echo ""
echo "3ï¸âƒ£  FULL RESET (make k3s-redeploy â†’ option 3 / make k3s-clean)"
echo "   Command: make k3s-clean"
echo "   What it does:"
echo "     âœ“ Deletes entire namespace"
echo "     âœ“ Deletes ALL data (DBs empty)"
echo "     âœ“ Keeps Docker images in k3s"
echo "     âœ“ Need to re-import images"
echo "     âœ“ Need full re-deploy"
echo "   Use when: Complete fresh start"
echo "   Time: ~2-5 minutes (setup + build + deploy)"
echo ""
echo "ğŸ“‹ QUICK COMMANDS:"
echo ""
echo "Restart only (keep everything):"
echo "  make k3s-restart"
echo ""
echo "Redeploy apps (keep DB data):"
echo "  make k3s-redeploy â†’ choose option 2"
echo ""
echo "Full cleanup (start from scratch):"
echo "  make k3s-clean"
echo "  ./setup.sh"
echo ""
echo "ğŸ’¡ TIPS:"
echo "â€¢ Docker images stay in k3s even after full cleanup"
echo "â€¢ Only need to rebuild images if code changes"
echo "â€¢ Database data persists in Hard Redeploy"
echo "â€¢ Use Soft Redeploy for quick config updates"
echo ""
